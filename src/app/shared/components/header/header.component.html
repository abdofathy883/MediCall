<header>
  <div class="container d-flex justify-content-around flex-nowrap">
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" routerLink="/">
          <img src="/MediCall-logo.png" alt="MediCall" width="150px" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          (click)="toggleNavbar()"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div 
          class="collapse navbar-collapse" 
          [ngClass]="{'show': !isNavbarCollapsed}" 
          id="navbarNav"
        >
          <ul class="navbar-nav">
            <li class="nav-item">
              <a
                class="nav-link"
                routerLink="/"
                routerLinkActive="active"
                [routerLinkActiveOptions]="{ exact: true }"
                >الرئيسية</a
              >
            </li>
            <!-- Show service request only for logged in users -->
            <li class="nav-item" *ngIf="isLoggedIn">
              <a class="nav-link" routerLink="/services" routerLinkActive="active">اطلب خدمة</a>
            </li>
            <!-- Show nurse-specific links only for nurses -->
            <li class="nav-item" *ngIf="isNurse">
              <a class="nav-link" routerLink="/nurse/dashboard" routerLinkActive="active">لوحة التحكم</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                routerLink="/about-us"
                routerLinkActive="active"
                >من نحن</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                routerLink="/complaints"
                routerLinkActive="active"
                >الشكاوى</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                routerLink="/contact"
                routerLinkActive="active"
                >تواصل معنا</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="d-flex justify-content-center align-items-center gap-2">
      <!-- Show login/register buttons for non-authenticated users -->
      <ng-container *ngIf="!isLoggedIn">
        <div class="d-flex justify-content-center align-items-center gap-2">
          <a routerLink="/account/register">
            <button class="button">سجل حساب</button>
          </a>
          <a routerLink="/account/login">
            <button class="button">تسجيل الدخول</button>
          </a>
        </div>
      </ng-container>

      <!-- Show user menu for authenticated users -->
      <ng-container *ngIf="isLoggedIn">
        <div class="dropdown">
          <button 
            class="btn dropdown-toggle user-menu-button" 
            type="button" 
            data-bs-toggle="dropdown" 
            aria-expanded="false"
          >
            <i class="bi bi-person-circle me-1"></i>
            <span *ngIf="currentUser">{{ currentUser.firstName }}</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <a class="dropdown-item" routerLink="/my-account">
                <i class="bi bi-person me-2"></i>حسابي
              </a>
            </li>
            <li *ngIf="isPatient">
              <a class="dropdown-item" routerLink="/patient/requests">
                <i class="bi bi-list-check me-2"></i>طلباتي
              </a>
            </li>
            <li *ngIf="isNurse">
              <a class="dropdown-item" routerLink="/nurse/services">
                <i class="bi bi-briefcase-medical me-2"></i>خدماتي
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <button class="dropdown-item text-danger" (click)="logout()">
                <i class="bi bi-box-arrow-right me-2"></i>تسجيل الخروج
              </button>
            </li>
          </ul>
        </div>
      </ng-container>
    </div>
  </div>
</header>

